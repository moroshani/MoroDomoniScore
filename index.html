<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>امتیاز شمار دومینو</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1C1C21">
    <style>
      :root {
        /* Light Mode: "Digital Domino Table" Theme */
        --color-bg-light: #F5F3F0; /* Parchment */
        --color-surface-light: rgba(255, 255, 255, 0.40); /* Frosted Glass */
        --color-text-primary-light: #3E352E; /* Dark Slate */
        --color-text-secondary-light: #796A5F; /* Muted Slate */
        --color-border-light: rgba(255, 255, 255, 0.60); /* Ivory Edge */
        --color-accent-primary-light: #00695C; /* Deep Teal */
        --color-accent-success-light: #388E3C; /* Forest Green */
        --color-accent-warning-light: #FFA000; /* Warm Amber */

        /* Dark Mode: "Digital Domino Table" Theme */
        --color-bg-dark: #1C1C21; /* Deep Charcoal */
        --color-surface-dark: rgba(45, 45, 52, 0.30); /* Smoked Glass */
        --color-text-primary-dark: #EAE6E1; /* Soft Ivory */
        --color-text-secondary-dark: #9E9E9E; /* Medium Gray */
        --color-border-dark: rgba(255, 255, 255, 0.15); /* Silver Edge */
        --color-accent-primary-dark: #00BFA5; /* Vibrant Teal */
        --color-accent-success-dark: #69F0AE; /* Bright Mint */
        --color-accent-warning-dark: #FFD740; /* Vivid Amber */

        /* Default to Light Mode variables */
        --color-bg: var(--color-bg-light);
        --color-surface: var(--color-surface-light);
        --color-text-primary: var(--color-text-primary-light);
        --color-text-secondary: var(--color-text-secondary-light);
        --color-border: var(--color-border-light);
        --color-accent-primary: var(--color-accent-primary-light);
        --color-accent-success: var(--color-accent-success-light);
        --color-accent-warning: var(--color-accent-warning-light);
      }
      .dark {
        --color-bg: var(--color-bg-dark);
        --color-surface: var(--color-surface-dark);
        --color-text-primary: var(--color-text-primary-dark);
        --color-text-secondary: var(--color-text-secondary-dark);
        --color-border: var(--color-border-dark);
        --color-accent-primary: var(--color-accent-primary-dark);
        --color-accent-success: var(--color-accent-success-dark);
        --color-accent-warning: var(--color-accent-warning-dark);
      }
      
      @keyframes score-pop {
        0% { transform: scale(1); }
        50% { transform: scale(1.15); color: var(--color-accent-success); }
        100% { transform: scale(1); }
      }
      .animate-score-pop {
        animation: score-pop 0.5s ease-in-out;
      }
      
      @keyframes confetti-fall {
        0% { transform: translateY(-10vh) rotateZ(0deg) rotateY(0deg); opacity: 1; }
        100% { transform: translateY(110vh) rotateZ(720deg) rotateY(360deg); opacity: 0; }
      }
      .confetti-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
      }
      .confetti-piece {
        position: absolute;
        width: 8px;
        height: 16px;
        opacity: 0;
        animation-name: confetti-fall;
        animation-timing-function: linear;
        animation-fill-mode: forwards;
      }

      body {
        font-family: 'Vazirmatn', sans-serif;
        background-color: var(--color-bg);
        color: var(--color-text-primary);
        transition: background-color 0.3s ease, color 0.3s ease;
        background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="4" height="4" viewBox="0 0 4 4"%3E%3Cpath fill="%239C92AC" fill-opacity="0.05" d="M1 3h1v1H1V3zm2-2h1v1H3V1z"%3E%3C/path%3E%3C/svg%3E');
      }
      .dark body {
        background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="4" height="4" viewBox="0 0 4 4"%3E%3Cpath fill="%239C92AC" fill-opacity="0.08" d="M1 3h1v1H1V3zm2-2h1v1H3V1z"%3E%3C/path%3E%3C/svg%3E');
      }
      .font-numeric {
        font-family: 'Vazirmatn', monospace;
      }
      .glass-card {
        background-color: var(--color-surface);
        backdrop-filter: blur(16px) saturate(180%);
        -webkit-backdrop-filter: blur(16px) saturate(180%);
        border: 1px solid var(--color-border);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
      }
      .btn-primary {
        @apply w-full justify-center inline-flex items-center px-6 py-3 border border-transparent text-base font-bold rounded-xl shadow-lg text-white disabled:bg-gray-400 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02];
        background-color: var(--color-accent-primary);
      }
      .btn-primary:hover:not(:disabled) {
        filter: brightness(1.1);
      }
      .btn-primary:focus {
        outline: none;
        box-shadow: 0 0 0 4px var(--color-accent-primary-light);
      }
      .dark .btn-primary:focus {
         box-shadow: 0 0 0 4px var(--color-accent-primary-dark);
      }
      .btn-secondary {
        @apply w-full justify-center inline-flex items-center px-6 py-3 border text-base font-bold rounded-xl shadow-sm focus:outline-none transition-all transform hover:scale-[1.02];
        background-color: var(--color-surface);
        color: var(--color-text-primary);
        border-color: var(--color-border);
      }
      .btn-secondary:hover {
        filter: brightness(1.1);
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.27.0"
  }
}
</script>
<script>
  if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    document.documentElement.classList.add('dark')
  } else {
    document.documentElement.classList.remove('dark')
  }

  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js').then(registration => {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
      }, err => {
        console.log('ServiceWorker registration failed: ', err);
      });
    });
  }
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>